# 儿童车辆认识工具使用说明

## 项目概述

这是一个用于儿童认识车辆以及听英语和中文车名发音的工具，包含三个主要脚本：

1. `car-name.py` - 生成车辆信息
2. `generate-image.py` - 生成车辆图片
3. `generate-audio.py` - 生成车辆音频

## 环境准备

### 1. 安装 Python 依赖

```bash
pip install -r requirements.txt
```

### 2. 配置 API 密钥

#### 智谱 AI 配置（已配置）

- 在 `car-name.py` 中已配置好 API 密钥
- 无需额外配置

#### 通义千问配置（已配置）

- 在 `generate-image.py` 中已配置好 API 密钥
- 无需额外配置

#### 豆包语音配置（需要配置）

- 在 `generate-audio.py` 中需要配置：
  - `APP_ID`: 豆包语音的 APP ID
  - `ACCESS_TOKEN`: 豆包语音的 Access Token
- 请参考 `ref-docs/豆包语音合成.md` 文档获取配置信息

## 使用步骤

### 第一步：生成车辆信息

```bash
python car-name.py
```

这个脚本会：

- 调用智谱 AI 的 GLM-4.5 模型
- 生成 18 种常见车辆的信息
- 包括中文名称、英文名称和描述
- 结果保存到 `car.json` 文件

### 第二步：生成车辆图片

```bash
python generate-image.py
```

这个脚本会：

- 读取 `car.json` 文件
- 调用通义千问生成车辆图片
- 图片保存到 `images/` 目录
- 更新 `car.json` 中的图片路径

### 第三步：生成车辆音频

```bash
python generate-audio.py
```

这个脚本会：

- 读取 `car.json` 文件
- 调用豆包语音合成生成中文和英文音频
- 音频保存到 `audios/` 目录
- 更新 `car.json` 中的音频路径

## 输出文件结构

运行完成后，项目目录结构如下：

```
kid-car/
├── car.json                 # 车辆信息主文件
├── images/                  # 车辆图片目录
│   ├── 小汽车_小汽车.jpg
│   ├── 公交车_公交车.jpg
│   └── ...
├── audios/                  # 车辆音频目录
│   ├── 小汽车_chinese.mp3
│   ├── 小汽车_english.mp3
│   └── ...
└── ...
```

## car.json 文件格式

```json
[
  {
    "car-name": "小汽车",
    "car-english-name": "Car",
    "car-description": "小汽车是一种常见的交通工具...",
    "car-type": "小汽车",
    "car-image-path": "images/小汽车_小汽车.jpg",
    "chinese-audio-path": "audios/小汽车_chinese.mp3",
    "english-audio-path": "audios/小汽车_english.mp3"
  }
]
```

## 注意事项

1. **按顺序执行**：必须按照 car-name.py → generate-image.py → generate-audio.py 的顺序执行
2. **网络连接**：需要稳定的网络连接访问 AI 模型 API
3. **API 限制**：注意各平台的 API 调用频率限制
4. **存储空间**：确保有足够的磁盘空间存储图片和音频文件
5. **豆包语音配置**：使用前必须配置正确的豆包语音 API 信息

## 故障排除

### 常见问题

1. **找不到 car.json 文件**

   - 确保先运行了 `car-name.py`

2. **图片生成失败**

   - 检查网络连接
   - 确认 API 密钥有效

3. **音频生成失败**

   - 检查豆包语音 API 配置
   - 确认 APP_ID 和 ACCESS_TOKEN 正确

4. **依赖包安装失败**
   - 使用 `pip install --upgrade pip` 升级 pip
   - 检查 Python 版本（建议 3.8+）

### 重新开始

如果需要重新生成所有内容，可以：

1. 删除 `car.json` 文件
2. 删除 `images/` 和 `audios/` 目录
3. 重新按顺序执行三个脚本

## 扩展功能

可以根据需要修改脚本：

- 在 `car-name.py` 中添加更多车辆类型
- 在 `generate-image.py` 中调整图片生成参数
- 在 `generate-audio.py` 中选择不同的音色
